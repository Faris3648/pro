プロセッサ設計演習用の配布モジュールです。
内容は以下の通り
- top_test.v: プロセッサの動作をシミュレーションするためのテストベンチです。メインメモリの動作の模倣、各種デバッグ情報等を出力します。既定値ではメモリへのアクセスは100サイクルかかります。シミュレーション時はこのファイルをコンパイラに渡してください。また、シミュレーションにはテストプログラムを専用のツールチェーンでビルドしたmem.datが必要です。このファイルはprogramsの中に順次追加します。このファイルでのパラメータの設定はシミュレーションだけに影響します。このファイルでシミュレーションを行うと以下のファイルが出力されます。
    - reg_dump.dat: シミュレーション終了時点でのレジスタの中身です。
    - mem_dump.dat: シミュレーション終了時点でのメインメモリの中身です。
    - icache_dump.dat/dcache_dump.dat: シミュレーション終了時点での命令/データキャッシュの中身です。
    - mem_log.dat: メインメモリへのアクセスの履歴です。アクセスのあったサイクル時間、読み書き、命令/データ、アドレスが記録されます。
    - icache_log.dat/dcache_log.dat: 命令/データキャッシュへのアクセス履歴です。アクセスのあったサイクル時間、読み書き、ヒット/ミス、アドレスが記録されます。ファイルの最後には総アクセス数、読み出しアクセス数、書き込みアクセス数、ヒット数、ミス数、ヒット率が出力されます。
- top.v: プロセッサコアとキャッシュを結ぶモジュールが入っています。論理合成をするときはこのファイルをコンパイラに渡してください。このファイルで設定したパラメータは論理合成に影響します。
- cache.v: キャッシュです。追い出しはLRU方式（Least Recently Used: 使われた時刻が最も古いブロックを追い出す）、書き込みはライトバック方式（ブロックをキャッシュから追い出すときにメモリに書き戻す）となっています。連想度と容量は設定可能です。面積・電力や性能との兼ね合いを見て良い値を探してみてください。
- regfile.v: レジスタファイルです。
- scrv32i.v: 上記モジュールのテスト用に作ったシングルサイクルデータパスのRV32Iコアです。プログラムの動作を追いたい場合などに使ってください。中身はあまり綺麗ではありません。論理合成をして、パイプラインプロセッサと比較してみるのも良いと思います。

履歴
2024/04/15 作成
2024/04/23 ひとまず完成